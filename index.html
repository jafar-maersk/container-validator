<!DOCTYPE html>
<head>
  <title>Container Validator</title>
  <link rel="shortcut icon" href="images/favicon.png">
  <script type="text/javascript" src="ContainerValidator.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <script>
    let validator = new ContainerValidator();
    function checkContainer(){
      let getText = document.getElementById("container-check").value;
      document.getElementById("container-check").style.backgroundColor = validator.isValid(getText) ? "#dcffdc" : "#ffd1d1";
      let message = validator.getErrorMessages()
      if(validator.getErrorMessages() && getText.length > 3){
        document.getElementById("errorMessage").innerHTML = message;
      } else {
        document.getElementById("errorMessage").innerHTML = "";
      }
      if(getText.length==10){
        document.getElementById("suggestionMessage").innerHTML = "Suggestion: " + getText + "<span class='check-digit'>" + validator.createCheckDigit(getText) + "</span>"
      } else {
        document.getElementById("suggestionMessage").innerHTML =  "" 
      }
    }

    function generateList(start = 0, end = 10000) {
      //let x = document.getElementById("container").value;
      let getText1 = document.getElementById("container-string1").value;
      let getText2 = document.getElementById("container-string2").value;
      let getText3 = document.getElementById("container-string3").value;
      document.getElementById("showTemp").innerHTML = validator.generate(
        ''+getText1+getText2+getText3,
        "U",
        start,
        end
      );
    }
  </script>
</head>
<body onload="generateList(0, 1000)">
  <div class= "header">
    <h1>Container Validator</h1>
    <p>Cargo container validator ISO 6346 </p>
  </div>
  <div class="page">
    <h2>Check valid container</h2>
    <input id="container-check" class="textbox1letter" type="text" name="fname" placeholder="MAEU0000008" maxlength="11" onKeyUp="return checkContainer()"   />
    <span class="suggestion-message" id="suggestionMessage"></span>
    <div class="error-message" id="errorMessage"></div>
    <hr class="divider">
    <h2>Generate container numbers</h2>
        <input id="container-string1" class="textbox3letter" type="text" name="fname" value="M" maxlength="1"  />
        <input id="container-string2" class="textbox3letter" type="text" name="fname" value="A" maxlength="1"  />
        <input id="container-string3" class="textbox3letter" type="text" name="fname" value="E" maxlength="1"   />

        <input id="container-string" class="textbox3letter" type="text" name="fname" value="U" maxlength="1" style="background-color: #e3e1e1;" readonly />
        <button class="button button-group__button button--primary" id="container" value="Generate" name="fname" onclick="generateList()" >Generate</button>
        <div class="container-list" id="showTemp"></div>
        <hr>
        <div style="color: #333; font-size: 11px; text-align: center;">
          For any queries: <a href="mailto:jafartke@gmail.com" style="color: #000;"> @jafartke</a> 
          | <span dir="auto"> Credits - Wikipedia : ISO 6346 <a style="color: #000;" target="_blank" href="http://en.wikipedia.org/wiki/ISO_6346" rel="nofollow">wikipedia.org</a>
          </span>
        </div>
      </div>
    
</body>
</html>
